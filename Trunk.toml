[build]
target = "index.html"
dist = "dist"
# Use relative paths for GitHub Pages subdirectory
public_url = "./"

[[hooks]]
stage = "pre_build"
command = "sh"
command_arguments = ["-c", "true"]

# Disable wasm-opt to avoid compatibility issues
[tools]
wasm_opt = "Off"

[watch]
watch = ["src", "index.html", "style.css"]

[serve]
addresses = ["127.0.0.1", "::1"]
port = 8080

# Copy PWA assets to dist
[[hooks]]
stage = "post_build"
command = "sh"
command_arguments = ["-c", "cp manifest.json sw.js icon-*.png dist/ 2>/dev/null || true"]
